"use strict";(self.webpackChunkmy_documentation=self.webpackChunkmy_documentation||[]).push([[4586],{1503:(n,e,a)=>{a.r(e),a.d(e,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"chatbot-kawan/usage","title":"Penggunaan Chatbot Kawan","description":"Daftar Isi","source":"@site/docs/chatbot-kawan/usage.md","sourceDirName":"chatbot-kawan","slug":"/chatbot-kawan/usage","permalink":"/documentation-rii92/docs/chatbot-kawan/usage","draft":false,"unlisted":false,"editUrl":"https://github.com/rii92/documentation-rii92/tree/main/docs/chatbot-kawan/usage.md","tags":[],"version":"current","frontMatter":{},"sidebar":"chatbotKawanSidebar","previous":{"title":"Struktur & Penjelasan Kode Chatbot Kawan","permalink":"/documentation-rii92/docs/chatbot-kawan/struktur"}}');var s=a(4848),r=a(8453);const t={},d="Penggunaan Chatbot Kawan",l={},o=[{value:"Daftar Isi",id:"daftar-isi",level:2},{value:"Mode Layanan",id:"mode-layanan",level:2},{value:"Fitur Utama",id:"fitur-utama",level:2},{value:"1. Mode Admin",id:"1-mode-admin",level:3},{value:"2. Mode Chatbot",id:"2-mode-chatbot",level:3},{value:"3. Broadcast Pesan",id:"3-broadcast-pesan",level:3},{value:"4. Notifikasi Jadwal PESALIR",id:"4-notifikasi-jadwal-pesalir",level:3},{value:"5. Simulasi Mengetik (Typing)",id:"5-simulasi-mengetik-typing",level:3},{value:"6. Penyimpanan Riwayat Pesan",id:"6-penyimpanan-riwayat-pesan",level:3},{value:"7. Penjadwalan Otomatis",id:"7-penjadwalan-otomatis",level:3},{value:"Alur Kerja Bot",id:"alur-kerja-bot",level:2},{value:"Perintah &amp; Contoh",id:"perintah--contoh",level:2},{value:"Perintah Menu",id:"perintah-menu",level:3},{value:"Perintah Broadcast (hanya admin)",id:"perintah-broadcast-hanya-admin",level:3},{value:"Contoh Interaksi",id:"contoh-interaksi",level:3},{value:"Integrasi &amp; API",id:"integrasi--api",level:2},{value:"Struktur Variabel <code>.env</code>",id:"struktur-variabel-env",level:3},{value:"Endpoint API yang digunakan",id:"endpoint-api-yang-digunakan",level:3},{value:"Tips Pengembangan",id:"tips-pengembangan",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Referensi Kode Utama",id:"referensi-kode-utama",level:2}];function c(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"penggunaan-chatbot-kawan",children:"Penggunaan Chatbot Kawan"})}),"\n",(0,s.jsx)(e.h2,{id:"daftar-isi",children:"Daftar Isi"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#mode-layanan",children:"Mode Layanan"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#fitur-utama",children:"Fitur Utama"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#alur-kerja-bot",children:"Alur Kerja Bot"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#perintah--contoh",children:"Perintah & Contoh"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#integrasi--api",children:"Integrasi & API"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"#tips-pengembangan",children:"Tips Pengembangan"})}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"mode-layanan",children:"Mode Layanan"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Kirim ",(0,s.jsx)(e.code,{children:"1"})," untuk menghubungi admin (mode admin, bot berhenti merespon otomatis)"]}),"\n",(0,s.jsxs)(e.li,{children:["Kirim ",(0,s.jsx)(e.code,{children:"2"})," untuk menggunakan chatbot pelayanan publik (mode bot, jawaban otomatis)"]}),"\n",(0,s.jsxs)(e.li,{children:["Kirim ",(0,s.jsx)(e.code,{children:"00"})," untuk kembali ke menu awal (reset mode)"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"fitur-utama",children:"Fitur Utama"}),"\n",(0,s.jsx)(e.h3,{id:"1-mode-admin",children:"1. Mode Admin"}),"\n",(0,s.jsx)(e.p,{children:"Pengguna akan dihubungkan ke admin, chatbot berhenti merespon otomatis. Admin akan mendapat notifikasi ke WhatsApp."}),"\n",(0,s.jsx)(e.h3,{id:"2-mode-chatbot",children:"2. Mode Chatbot"}),"\n",(0,s.jsx)(e.p,{children:"Pengguna dapat bertanya ke chatbot. Jawaban diambil dari Google Spreadsheet (jika ada) atau fallback ke DialogFlow."}),"\n",(0,s.jsx)(e.h3,{id:"3-broadcast-pesan",children:"3. Broadcast Pesan"}),"\n",(0,s.jsx)(e.p,{children:"Admin dapat mengirim pesan umum ke banyak pengguna, baik langsung maupun terjadwal (misal jam 8 pagi). Pesan bisa berisi template dinamis."}),"\n",(0,s.jsx)(e.h3,{id:"4-notifikasi-jadwal-pesalir",children:"4. Notifikasi Jadwal PESALIR"}),"\n",(0,s.jsx)(e.p,{children:"Bot otomatis mengirim pengingat ke petugas, pengawas, dan admin setiap hari berdasarkan data API."}),"\n",(0,s.jsx)(e.h3,{id:"5-simulasi-mengetik-typing",children:"5. Simulasi Mengetik (Typing)"}),"\n",(0,s.jsx)(e.p,{children:'Bot akan menampilkan status "sedang mengetik" sebelum mengirim balasan, agar terasa natural.'}),"\n",(0,s.jsx)(e.h3,{id:"6-penyimpanan-riwayat-pesan",children:"6. Penyimpanan Riwayat Pesan"}),"\n",(0,s.jsx)(e.p,{children:"Setiap pesan masuk/keluar akan dicatat ke API untuk keperluan monitoring."}),"\n",(0,s.jsx)(e.h3,{id:"7-penjadwalan-otomatis",children:"7. Penjadwalan Otomatis"}),"\n",(0,s.jsxs)(e.p,{children:["Menggunakan ",(0,s.jsx)(e.code,{children:"node-schedule"})," untuk broadcast dan notifikasi harian."]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"alur-kerja-bot",children:"Alur Kerja Bot"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"User mengirim pesan ke WhatsApp"}),"\n",(0,s.jsx)(e.li,{children:"Bot cek mode user (admin/bot/reset)"}),"\n",(0,s.jsx)(e.li,{children:"Jika admin, user dihubungkan ke admin dan admin mendapat notifikasi"}),"\n",(0,s.jsx)(e.li,{children:"Jika bot, pesan user dijawab otomatis (Spreadsheet/AI)"}),"\n",(0,s.jsx)(e.li,{children:"Jika broadcast, admin bisa mengirim pesan ke banyak user sekaligus"}),"\n",(0,s.jsx)(e.li,{children:"Scheduler berjalan otomatis untuk notifikasi harian"}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"perintah--contoh",children:"Perintah & Contoh"}),"\n",(0,s.jsx)(e.h3,{id:"perintah-menu",children:"Perintah Menu"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"1"})," : Hubungi admin"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"2"})," : Chatbot pelayanan publik"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"00"})," : Kembali ke menu awal"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"perintah-broadcast-hanya-admin",children:"Perintah Broadcast (hanya admin)"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"kirim-pesan-umum::<idMessage>::delay::<pesan>"})," \u2014 broadcast terjadwal (dikirim jam 8 pagi)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"kirim-pesan-umum::<idMessage>::now::<pesan>"})," \u2014 broadcast langsung"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Contoh:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"kirim-pesan-umum::12345::delay::Selamat pagi, ini pesan broadcast!\r\nkirim-pesan-umum::12345::now::Pesan langsung ke semua user\n"})}),"\n",(0,s.jsx)(e.h3,{id:"contoh-interaksi",children:"Contoh Interaksi"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["User: ",(0,s.jsx)(e.code,{children:"1"}),' \u2192 Bot: "Anda akan dihubungkan dengan admin..."']}),"\n",(0,s.jsxs)(e.li,{children:["User: ",(0,s.jsx)(e.code,{children:"2"}),' \u2192 Bot: "Anda sekarang berinteraksi dengan chatbot..."']}),"\n",(0,s.jsxs)(e.li,{children:["User: ",(0,s.jsx)(e.code,{children:"00"}),' \u2192 Bot: "Anda sekarang kembali ke fitur awal..."']}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"integrasi--api",children:"Integrasi & API"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"whatsapp-web.js"}),": Library utama untuk WhatsApp"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"qrcode-terminal"}),": Menampilkan QR code login di terminal"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"axios"}),": HTTP request ke API eksternal (admin, jadwal, dsb)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"dotenv"}),": Load variabel lingkungan dari ",(0,s.jsx)(e.code,{children:".env"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"uuid"}),": Generate ID unik untuk pencatatan pesan"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"node-schedule"}),": Penjadwalan otomatis (broadcast, notifikasi)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Google Spreadsheet"}),": Sumber jawaban chatbot (opsional)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"DialogFlow"}),": Fallback AI untuk jawaban chatbot"]}),"\n"]}),"\n",(0,s.jsxs)(e.h3,{id:"struktur-variabel-env",children:["Struktur Variabel ",(0,s.jsx)(e.code,{children:".env"})]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"APIKEY=...           # Endpoint utama API\r\nAPIKEYPESALIR=...    # Endpoint API jadwal PESALIR\r\nnoAdmin1=...         # Nomor admin fallback (opsional)\r\nnoAdmin2=...\r\nnoAdmin3=...\r\nnoAdmin4=...\n"})}),"\n",(0,s.jsx)(e.h3,{id:"endpoint-api-yang-digunakan",children:"Endpoint API yang digunakan"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"?action=read-admin"})," : Mendapatkan daftar admin"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"?action=save-record-message"})," : Menyimpan riwayat pesan"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"?action=read-spam"})," : Mendapatkan data broadcast"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"?action=petugas-pesalir"})," : Mendapatkan jadwal petugas"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"tips-pengembangan",children:"Tips Pengembangan"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Pastikan semua variabel di ",(0,s.jsx)(e.code,{children:".env"})," sudah terisi dan endpoint API aktif"]}),"\n",(0,s.jsx)(e.li,{children:"Untuk pengembangan, gunakan WhatsApp dummy/test"}),"\n",(0,s.jsx)(e.li,{children:"Cek log terminal untuk error detail"}),"\n",(0,s.jsx)(e.li,{children:"Untuk integrasi Google Spreadsheet/DialogFlow, pastikan kredensial sudah benar"}),"\n",(0,s.jsxs)(e.li,{children:["Kustomisasi pesan balasan di fungsi ",(0,s.jsx)(e.code,{children:"modeTyping"}),", ",(0,s.jsx)(e.code,{children:"handleAdminMode"}),", dsb"]}),"\n",(0,s.jsxs)(e.li,{children:["Untuk menambah fitur, tambahkan di handler utama (",(0,s.jsx)(e.code,{children:"client.on('message', ...)"}),")"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"QR code tidak muncul:"})," Pastikan terminal mendukung output QR dan koneksi internet stabil"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Bot tidak merespon:"})," Cek koneksi WhatsApp, API, dan log error terminal"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Pesan broadcast tidak terkirim:"})," Pastikan user adalah admin dan format perintah benar"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Notifikasi PESALIR tidak jalan:"})," Cek endpoint API jadwal dan waktu server"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"referensi-kode-utama",children:"Referensi Kode Utama"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-js",children:"const { Client, LocalAuth } = require('whatsapp-web.js');\r\nconst qrcode = require('qrcode-terminal');\r\nconst axios = require('axios');\r\nconst { v4: uuidv4 } = require('uuid');\r\nconst dotenv = require('dotenv');\r\nconst { runDialogFlow } = require('./dialog_flow');\r\nconst { cekSpreadsheetMessage } = require('./message_spreadsheet');\r\nconst { replaceMultipleStringsAll } = require('./replace-string.js');\r\nconst schedule = require('node-schedule');\r\n// ...existing code...\n"})})]})}function h(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(c,{...n})}):c(n)}},8453:(n,e,a)=>{a.d(e,{R:()=>t,x:()=>d});var i=a(6540);const s={},r=i.createContext(s);function t(n){const e=i.useContext(r);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:t(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);